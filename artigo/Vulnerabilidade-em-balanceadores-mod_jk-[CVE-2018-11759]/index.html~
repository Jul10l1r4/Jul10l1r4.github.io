<!DOCTYPE html>
<html lang="pt-BR">
	<head>
      <meta charset="utf-8"/>
      <title>Shell script e performance psicopata üî™ ‚Äì stdout, echo printf ou cat com o here document? Veja qual se sai mais veloz	 | Julio Lira</title>	
      <!--link rel="icon" type="image/png" href="img/favicon.png" /-->
      <meta name="viewport" content="width=device-width, user-scalable=no"/>
      <link rel="stylesheet" href="https://jul10l1r4.github.io/Texto-farmatacao/principal.css"/>
      <link rel="stylesheet" href="../../css/layout.css"/>
      <meta name="author" content="Julio Lira"/>
			<link rel="icon" href="../../assets/jl.png" />
      <meta name="robots" content="index, follow">
      <meta property="og:site_name" content="https://jul10l1r4.github.io/" />
      <meta property="og:url" content="https://jul10l1r4.github.io/artigos/Shell-script-e-performance-psicopata-üî™--stdout/index.html" />
      <meta name="description" content="N√≥s que trabalhamos com bash queremos performance e baixo consumo em nossa infra n√£o √© mesmo? Ent√£o resolvi fazer uns testes de sa√≠da."/>
      <meta property="og:title" content="Shell script e performance psicopata üî™ ‚Äì stdout | Julio Lira">
      <meta property="og:image" content="parada1.png"/>
      <meta property="og:description" content="N√≥s que trabalhamos com bash queremos performance e baixo consumo em nossa infra n√£o √© mesmo? Ent√£o resolvi fazer uns testes de sa√≠da."/>
      <meta property="og:author" content="Julio Lira"/>
  <!-- twitter metatags-->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Shell script e performance psicopata üî™ ‚Äì stdout | Julio Lira">
  <meta name="twitter:description" content="N√≥s que trabalhamos com bash queremos performance e baixo consumo em nossa infra n√£o √© mesmo? Ent√£o resolvi fazer uns testes de sa√≠da">
  <meta name="twitter:image" content="parada1.png">
			<script src="../../Ecmascript/analiz.js"></script>
			<script async src="../../Ecmascript/scroll.js"></script>
<!-- Facilitar indexa√ß√£o de ferramentas de busca --->
	<script type="application/ld+json">
{
	"name":"Shell script e performance psicopata üî™ ‚Äì stdout | Julio Lira",
	"description":"N√≥s que trabalhamos com bash queremos performance e baixo consumo em nossa infra n√£o √© mesmo? Ent√£o resolvi fazer uns testes de sa√≠da",
	"author":"Julio Lira",
	"@type":"Organization",
	"url":"https://jul10l1r4.github.io/artigos/Shell-script-e-performance-psicopata-üî™--stdout/index.html",
	"image":"https://instagram.fnat2-1.fna.fbcdn.net/vp/c86b9975b58d82a3e5ea3526131a8d2a/5B146E0F/t51.2885-15/e35/26868816_181404315800705_76975572110016512_n.jpg",
	"headline":"Julio Lira",
  "@context":"http://schema.org",
  "contactPoint": {
					"@type": "ContactPoint",
					"email": "jul10l1r4@ufrn.edu.br"
				}
}
		 </script>
			
    </head>
    <body>
			<header style="background-image: url(../../assets/bg-ops.png)" id="top">
				<div id="to">
			    <h1>Vulnerabilidade em balanceadores mod_jk - [CVE-2018-11759]						<!--img src="https://emojipedia-us.s3.amazonaws.com/thumbs/160/facebook/111/smirking-face_1f60f.png"/-->
				</h1>
				</div>
			</header>
			<a id="down" href="#conteudo">√â o apocalipse</a>
			<section class="medium-text">
				<p id="conteudo">
				O uso de balanceadores (ou load balancer) passou a ser bem maior pela s√©rie de benef√≠cios que nos tr√°s, e um dos principais benef√≠cios dele √© a seguran√ßa, tendo um balanceador em uma rede controlar√° todos os acessos para que sejam centralizados e distribuidos, al√©m de que o servdor mod_jk (m√≥dulo do apache) receber√° toda a requisi√ß√£o e processar√° como entende, ou seja: Mesmo que seu outro servidor interno possua falhas de seguran√ßa possibilitando um bypass ou at√© mesmo um arquivo e PHP sem que tenha o interpretador instalado (o mod_jk, impede de que ele seja exibido).	
				</p>
				<p>
				J√° um m√™s atr√°s o especialista em seguran√ßa da inf√ß√£<i>o Alphan YAVAS</i> publicou um bug encontrado no c√≥digo do mod_jk, no qual ele possibilitava ter acesso a rota<code>/jkstatus</code>, onde nela possui todas as informa√ß√µes das inst√¢ncias balanceadas, dando a possibilidade de realizar at√© mesmo algumas configura√ß√µes relacionadas a ela!
				</p>
				<h1>Descoberta</h1>
				<p>
				O erro era no pr√≥prio c√≥digo fonte do mod_jk especificamente no arquiv<code>tomcat/jk/trunk/native/apache-2.0/mod_jk.c</code>, esse trecho cont√©m a instru√ß√£o de bloquear com que a ea <code>../</code> seja interpretada como instru√ß√£o (pois seria poss√≠vel navegar atrav√©s dos diret√≥rios), e foi justamente a√≠ que ele encontrou a falha, essa instru√ß√£o n√£o anularia nenhuma forma de concatena√ß√£o de requisi√ß√£o, foi realizado o teste injetando justamente essas instru√ß√µes, reportado como CVE o atuante acrescentou apenas <code>;</code>.
				</p>
				<h2>Ponto-e-virgula da morte</h2>
				<p>
				Acontece que sinais como: <code>&</code>, <code>;</code> e <code>=</code> s√£o instru√ß√µes aceitas para envio e recebimento e recebimento de dados HTTP, ent√£o tanto o browser entender√° aquilo como uma rota atuante quanto o servidor tamb√©m compreender√° da mesma forma, uma forma de ver isso em um ambiente real j√° foi projetada pelo grupo immunIT e est√° dispon√≠vel um docker-compose em https://github.com/immunIT/CVE-2018-11759.
				</p>
			</section>
			<footer class="separador-top top6">
       <br/>
				<a href="https://jul10l1r4.github.io/">
					‚Üê Ir para a HOME
				</a>
        |
				<a href="http://jul10l1r4.github.io/HTTP_-_Resposta/">
					Mantenha a seguran√ßa de sua p√°gina, HTTP Meme resposta ‚Üí
				</a>
			</footer>
    </body>
  </html>		
